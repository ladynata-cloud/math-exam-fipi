# Построение локальной базы заданий ОГЭ

Инструмент извлекает номера задач, номер варианта и страницу из PDF и сохраняет результаты в `oge_db.xlsx` и `oge_db.csv`.

## Подготовка
1. Создайте виртуальное окружение Python 3.10+.
2. Установите зависимости:
   ```bash
   pip install -r tools/oge_db/requirements.txt
   ```

## Запуск
Запустите сборку, указав путь к PDF и директорию для результата:
```bash
python tools/oge_db/build_db.py --pdf "PATH_TO_PDF" --out tools/oge_db/out
```

* `--pdf` — путь к локальному файлу PDF с вариантами.
* `--out` — папка, куда будут сохранены `oge_db.xlsx` и `oge_db.csv`.

## Что попадает в базу
* `variant` — номер варианта, найденный на странице.
* `task_number` — номер задания (определяется по строкам вида `1.` или `1)` на странице).
* `page` — номер страницы в PDF, где встречается задание.
* `page_pdf` — ссылка на страницу в исходном PDF (`<имя файла>#page=<номер>`).
* `theme_guess` — черновая оценка темы по номеру задания (примерная, для первичной сортировки).
* `text_preview` — сокращённый текст страницы для проверки совпадений.

Если в файле не удаётся найти номера заданий, скрипт завершится с ошибкой.
